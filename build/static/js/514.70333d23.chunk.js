"use strict";(self.webpackChunknodetree_home=self.webpackChunknodetree_home||[]).push([[514],{514:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(43),i=s(453),l=s(505),o=s(578),n=s(66),r=s(579);const c=e=>{let{onPostsLoaded:t}=e;const{isAuthenticated:s}=(0,n.A)(),[c,d]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[j,b]=(0,a.useState)(null),[v,f]=(0,a.useState)(null),[w,y]=(0,a.useState)("ART WORK"),[k,N]=(0,a.useState)("\uc791\uc5c5 \uae30\ub85d"),[C,W]=(0,a.useState)(!1),S=(0,a.useCallback)(async()=>{p(!0),m(null);try{const e=await l.s1.getAllPosts();e.success?(d(e.data),t&&t(e.data.length)):m(e.message)}catch(e){m("\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),console.error("Work \ub85c\ub529 \uc624\ub958:",e)}finally{p(!1)}},[t]);(0,a.useEffect)(()=>{(async()=>{p(!0),m(null);try{const[e,s]=await Promise.all([l.s1.getAllPosts(),l.s1.getWorkHeader()]);e.success?(d(e.data),t&&t(e.data.length)):m(e.message),s.success&&s.data&&(y(s.data.title||"ART WORK"),N(s.data.subtitle||"\uc791\uc5c5 \uae30\ub85d"))}catch(e){m("\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),console.error("Work \ub85c\ub529 \uc624\ub958:",e)}finally{p(!1)}})()},[t]);const H=e=>{g(!1),S()},P=()=>{b(null)};return x?(0,r.jsx)(o.A,{onSavePost:H,onBackToWork:()=>g(!1),postType:"work"}):v?(0,r.jsx)(o.A,{onSavePost:e=>{f(null),S()},onBackToWork:()=>f(null),postType:"work",editPost:v}):j?(0,r.jsx)("div",{className:"page-content",children:(0,r.jsxs)("div",{className:"post-detail-container",children:[(0,r.jsxs)("div",{className:"post-detail-header",children:[(0,r.jsx)(i.P.button,{className:"back-button",onClick:P,whileHover:{scale:1.05},whileTap:{scale:.95},children:"\u2190 \ubaa9\ub85d\uc73c\ub85c"}),s&&(0,r.jsxs)("div",{className:"post-actions",children:[(0,r.jsx)(i.P.button,{className:"edit-button",onClick:()=>(f(j),void b(null)),whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uc218\uc815"}),(0,r.jsx)(i.P.button,{className:"delete-button",onClick:()=>(async e=>{if(window.confirm('"'.concat(e.title,'" \uae30\ub85d\uc744 \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?')))try{const t=await l.s1.deletePost(e.id);t.success&&(alert(t.message),b(null),S())}catch(t){console.error("\uae30\ub85d \uc0ad\uc81c \uc624\ub958:",t),alert(t instanceof Error?t.message:"\uae30\ub85d \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}})(j),whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uc0ad\uc81c"})]})]}),(0,r.jsxs)("article",{className:"post-article",children:[(0,r.jsxs)("header",{className:"post-header",children:[(0,r.jsx)("h1",{className:"post-title",children:j.title}),(0,r.jsx)("div",{className:"post-meta",children:(0,r.jsx)("span",{className:"post-date",children:j.date})})]}),(0,r.jsxs)("div",{className:"post-content",children:[(0,r.jsx)("div",{className:"post-text",children:(T=j.content,T.split("\n").map((e,t)=>{let s=0;const i=[];return e.replace(/(!{1,2})\[([^\]]*)\]\(([^)]+)\)/g,(a,l,o,n,c)=>{if(i.push(e.substring(s,c)),"!!"===l){let e;if(n.includes("youtube.com")||n.includes("youtu.be")){const t=n.match(/(?:v=|vi\/|embed\/|\.be\/|youtu\.be\/)([a-zA-Z0-9_-]{11})/),s=t?t[1]:null;s&&(e=(0,r.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",maxWidth:"100%",background:"#000"},children:(0,r.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(s),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:o||"YouTube video player"})}))}else if(n.includes("vimeo.com")){const t=n.match(/vimeo\.com\/(?:video\/)?(\d+)/),s=t?t[1]:null;s&&(e=(0,r.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",maxWidth:"100%",background:"#000"},children:(0,r.jsx)("iframe",{src:"https://player.vimeo.com/video/".concat(s),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,title:o||"Vimeo video player"})}))}else e=(0,r.jsx)("video",{src:n,controls:!0,style:{maxWidth:"100%",borderRadius:"8px"},title:o});e?i.push((0,r.jsx)("div",{style:{margin:"20px 0"},children:e},"".concat(t,"-").concat(c))):i.push(a)}else"!"===l&&i.push((0,r.jsx)("div",{style:{textAlign:"center",margin:"20px 0"},children:(0,r.jsx)("img",{src:n,alt:o||"\uc774\ubbf8\uc9c0",style:{maxWidth:"100%",height:"auto",borderRadius:"8px"}})},"".concat(t,"-").concat(c)));return s=c+a.length,a}),i.push(e.substring(s)),(0,r.jsxs)(a.Fragment,{children:[i.map((e,t)=>(0,r.jsx)(a.Fragment,{children:e},t)),t<T.split("\n").length-1&&(0,r.jsx)("br",{})]},t)}))}),(j.title.includes("\uc720\uae30\uc801\uacf5\uba85")||j.title.includes("\uc5d0\ub514\uc544\ud3ec\ub2c9"))&&(0,r.jsx)("div",{className:"pdf-catalog-section",children:(0,r.jsxs)("div",{className:"pdf-catalog-card",children:[(0,r.jsx)("div",{className:"pdf-catalog-icon",children:(0,r.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M14 2V8H20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M9 13H15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M9 17H15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),(0,r.jsxs)("div",{className:"pdf-catalog-info",children:[(0,r.jsx)("h3",{className:"pdf-catalog-title",children:"Exhibition Catalog"}),(0,r.jsx)("p",{className:"pdf-catalog-subtitle",children:"\uc720\uae30\uc801\uacf5\uba85 : \uc5d0\ub514\uc544\ud3ec\ub2c9 \uc6f9 \ub3c4\ub85d"}),(0,r.jsx)("p",{className:"pdf-catalog-size",children:"PDF \xb7 8.5MB"})]}),(0,r.jsxs)("div",{className:"pdf-catalog-actions",children:[(0,r.jsx)("a",{href:"/pdf/\uc6f9\ub3c4\ub85d.pdf",target:"_blank",rel:"noopener noreferrer",className:"pdf-view-button",children:"View"}),(0,r.jsx)("a",{href:"/pdf/\uc6f9\ub3c4\ub85d.pdf",download:"\uc720\uae30\uc801\uacf5\uba85_\uc5d0\ub514\uc544\ud3ec\ub2c9_\uc6f9\ub3c4\ub85d.pdf",className:"pdf-download-button",children:"Download"})]})]})})]})]})]})}):(0,r.jsxs)("div",{className:"page-content",children:[(0,r.jsx)("div",{className:"page-header",children:C?(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:"16px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",padding:"24px 20px 16px 20px",marginBottom:16,display:"flex",flexDirection:"column",alignItems:"stretch",gap:12,maxWidth:480,width:"100%",marginLeft:"auto",marginRight:"auto"},children:[(0,r.jsx)("textarea",{value:w,onChange:e=>y(e.target.value),style:{fontSize:"2rem",fontWeight:700,border:"none",borderBottom:"2px solid #eee",outline:"none",padding:"8px 0",marginBottom:4,background:"transparent",textAlign:"center",borderRadius:0,transition:"border-color 0.2s",resize:"none",minHeight:40,overflow:"hidden"},placeholder:"\uc81c\ubaa9 \uc785\ub825",autoFocus:!0,rows:1,onInput:e=>{const t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}}),(0,r.jsx)("textarea",{value:k,onChange:e=>N(e.target.value),style:{fontSize:"1.1rem",border:"none",borderBottom:"1.5px solid #eee",outline:"none",padding:"6px 0",background:"transparent",textAlign:"center",borderRadius:0,transition:"border-color 0.2s",resize:"none",minHeight:32,overflow:"hidden"},placeholder:"\ubd80\uc81c\ubaa9 \uc785\ub825",rows:1,onInput:e=>{const t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}}),(0,r.jsx)("button",{onClick:async()=>{try{await l.s1.updateWorkHeader({title:w,subtitle:k}),W(!1)}catch(e){alert("\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},style:{background:"#222",color:"#fff",border:"none",borderRadius:"8px",padding:"10px 0",fontWeight:600,fontSize:"1rem",marginTop:8,cursor:"pointer",boxShadow:"0 1px 4px rgba(0,0,0,0.08)",transition:"background 0.2s",width:120,alignSelf:"center"},children:"\uc800\uc7a5"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"page-title",children:w}),(0,r.jsx)("div",{className:"page-subtitle",children:k}),s&&(0,r.jsx)("button",{onClick:()=>W(!0),className:"write-button",children:"\ud3b8\uc9d1"})]})}),(0,r.jsxs)("div",{className:"work-container",children:[(0,r.jsx)("div",{className:"work-header",children:s&&(0,r.jsx)(i.P.button,{className:"write-button",onClick:()=>g(!0),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uc0c8 \uae00 \uc791\uc131"})}),h&&(0,r.jsxs)("div",{className:"loading-container",children:[(0,r.jsx)(i.P.div,{className:"loading-spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"\u27f3"}),(0,r.jsx)("p",{children:"\uae30\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}),u&&(0,r.jsxs)("div",{className:"error-container",children:[(0,r.jsxs)("p",{className:"error-message",children:["\uc624\ub958: ",u]}),(0,r.jsx)(i.P.button,{className:"retry-button",onClick:S,whileHover:{scale:1.05},whileTap:{scale:.95},children:"\ub2e4\uc2dc \uc2dc\ub3c4"})]}),!h&&!u&&0===c.length&&(0,r.jsxs)(i.P.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[(0,r.jsx)("p",{children:"\uc544\uc9c1 \uae30\ub85d\ub41c \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,r.jsx)("p",{children:"\uc0c8 \uae30\ub85d\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})]}),!h&&!u&&c.length>0&&(0,r.jsx)("div",{className:"posts-grid",children:c.map((e,t)=>(0,r.jsxs)("div",{className:"post-grid-item",children:[(0,r.jsx)("div",{className:"post-grid-thumbnail",onClick:()=>(e=>{b(e)})(e),children:e.thumbnail?(0,r.jsx)("img",{src:e.thumbnail.startsWith("//")?"https:".concat(e.thumbnail):e.thumbnail,alt:e.title}):(0,r.jsx)("div",{className:"post-grid-no-image",children:"\uc774\ubbf8\uc9c0 \uc5c6\uc74c"})}),(0,r.jsx)("div",{className:"post-grid-content",children:(0,r.jsx)("h3",{className:"post-grid-title",children:e.title})})]},t))})]})]});var T}}}]);
//# sourceMappingURL=514.70333d23.chunk.js.map