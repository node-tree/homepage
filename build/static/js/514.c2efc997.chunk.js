"use strict";(self.webpackChunknodetree_home=self.webpackChunknodetree_home||[]).push([[514],{514:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(43),i=s(453),l=s(505),n=s(578),o=s(66),r=s(579);const c=e=>{let{onPostsLoaded:t}=e;const{isAuthenticated:s}=(0,o.A)(),[c,d]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),[p,m]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),[w,f]=(0,a.useState)("ART WORK"),[N,k]=(0,a.useState)("\uc791\uc5c5 \uae30\ub85d"),[S,W]=(0,a.useState)(!1),C=(0,a.useCallback)(async()=>{u(!0),m(null);try{const e=await l.s1.getAllPosts();e.success?(d(e.data),t&&t(e.data.length)):m(e.message)}catch(e){m("\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),console.error("Work \ub85c\ub529 \uc624\ub958:",e)}finally{u(!1)}},[t]);(0,a.useEffect)(()=>{C()},[C]),(0,a.useEffect)(()=>{(async()=>{try{const e=await l.s1.getWorkHeader();e.success&&e.data&&(f(e.data.title||"ART WORK"),k(e.data.subtitle||"\uc791\uc5c5 \uae30\ub85d"))}catch(e){}})()},[]);const P=e=>{g(!1),C()},T=()=>{j(null)};return x?(0,r.jsx)(n.A,{onSavePost:P,onBackToWork:()=>g(!1),postType:"work"}):v?(0,r.jsx)(n.A,{onSavePost:e=>{y(null),C()},onBackToWork:()=>y(null),postType:"work",editPost:v}):b?(0,r.jsx)("div",{className:"page-content",children:(0,r.jsxs)("div",{className:"post-detail-container",children:[(0,r.jsxs)("div",{className:"post-detail-header",children:[(0,r.jsx)(i.P.button,{className:"back-button",onClick:T,whileHover:{scale:1.05},whileTap:{scale:.95},children:"\u2190 \ubaa9\ub85d\uc73c\ub85c"}),s&&(0,r.jsxs)("div",{className:"post-actions",children:[(0,r.jsx)(i.P.button,{className:"edit-button",onClick:()=>(y(b),void j(null)),whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uc218\uc815"}),(0,r.jsx)(i.P.button,{className:"delete-button",onClick:()=>(async e=>{if(window.confirm('"'.concat(e.title,'" \uae30\ub85d\uc744 \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?')))try{const t=await l.s1.deletePost(e.id);t.success&&(alert(t.message),j(null),C())}catch(t){console.error("\uae30\ub85d \uc0ad\uc81c \uc624\ub958:",t),alert(t instanceof Error?t.message:"\uae30\ub85d \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}})(b),whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uc0ad\uc81c"})]})]}),(0,r.jsxs)("article",{className:"post-article",children:[(0,r.jsxs)("header",{className:"post-header",children:[(0,r.jsx)("h1",{className:"post-title",children:b.title}),(0,r.jsx)("div",{className:"post-meta",children:(0,r.jsx)("span",{className:"post-date",children:b.date})})]}),(0,r.jsx)("div",{className:"post-content",children:(0,r.jsx)("div",{className:"post-text",children:(A=b.content,A.split("\n").map((e,t)=>{let s=0;const i=[];return e.replace(/(!{1,2})\[([^\]]*)\]\(([^)]+)\)/g,(a,l,n,o,c)=>{if(i.push(e.substring(s,c)),"!!"===l){let e;if(o.includes("youtube.com")||o.includes("youtu.be")){const t=o.match(/(?:v=|vi\/|embed\/|\.be\/|youtu\.be\/)([a-zA-Z0-9_-]{11})/),s=t?t[1]:null;s&&(e=(0,r.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",maxWidth:"100%",background:"#000"},children:(0,r.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(s),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:n||"YouTube video player"})}))}else if(o.includes("vimeo.com")){const t=o.match(/vimeo\.com\/(?:video\/)?(\d+)/),s=t?t[1]:null;s&&(e=(0,r.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",maxWidth:"100%",background:"#000"},children:(0,r.jsx)("iframe",{src:"https://player.vimeo.com/video/".concat(s),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,title:n||"Vimeo video player"})}))}else e=(0,r.jsx)("video",{src:o,controls:!0,style:{maxWidth:"100%",borderRadius:"8px"},title:n});e?i.push((0,r.jsx)("div",{style:{margin:"20px 0"},children:e},"".concat(t,"-").concat(c))):i.push(a)}else"!"===l&&i.push((0,r.jsx)("div",{style:{textAlign:"center",margin:"20px 0"},children:(0,r.jsx)("img",{src:o,alt:n||"\uc774\ubbf8\uc9c0",style:{maxWidth:"100%",height:"auto",borderRadius:"8px"}})},"".concat(t,"-").concat(c)));return s=c+a.length,a}),i.push(e.substring(s)),(0,r.jsxs)(a.Fragment,{children:[i.map((e,t)=>(0,r.jsx)(a.Fragment,{children:e},t)),t<A.split("\n").length-1&&(0,r.jsx)("br",{})]},t)}))})})]})]})}):(0,r.jsxs)("div",{className:"page-content",children:[(0,r.jsx)("div",{className:"page-header",children:S?(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:"16px",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",padding:"24px 20px 16px 20px",marginBottom:16,display:"flex",flexDirection:"column",alignItems:"stretch",gap:12,maxWidth:480,width:"100%",marginLeft:"auto",marginRight:"auto"},children:[(0,r.jsx)("textarea",{value:w,onChange:e=>f(e.target.value),style:{fontSize:"2rem",fontWeight:700,border:"none",borderBottom:"2px solid #eee",outline:"none",padding:"8px 0",marginBottom:4,background:"transparent",textAlign:"center",borderRadius:0,transition:"border-color 0.2s",resize:"none",minHeight:40,overflow:"hidden"},placeholder:"\uc81c\ubaa9 \uc785\ub825",autoFocus:!0,rows:1,onInput:e=>{const t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}}),(0,r.jsx)("textarea",{value:N,onChange:e=>k(e.target.value),style:{fontSize:"1.1rem",border:"none",borderBottom:"1.5px solid #eee",outline:"none",padding:"6px 0",background:"transparent",textAlign:"center",borderRadius:0,transition:"border-color 0.2s",resize:"none",minHeight:32,overflow:"hidden"},placeholder:"\ubd80\uc81c\ubaa9 \uc785\ub825",rows:1,onInput:e=>{const t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}}),(0,r.jsx)("button",{onClick:async()=>{try{await l.s1.updateWorkHeader({title:w,subtitle:N}),W(!1)}catch(e){alert("\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},style:{background:"#222",color:"#fff",border:"none",borderRadius:"8px",padding:"10px 0",fontWeight:600,fontSize:"1rem",marginTop:8,cursor:"pointer",boxShadow:"0 1px 4px rgba(0,0,0,0.08)",transition:"background 0.2s",width:120,alignSelf:"center"},children:"\uc800\uc7a5"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"page-title",children:w}),(0,r.jsx)("div",{className:"page-subtitle",children:N}),s&&(0,r.jsx)("button",{onClick:()=>W(!0),className:"write-button",children:"\ud3b8\uc9d1"})]})}),(0,r.jsxs)("div",{className:"work-container",children:[(0,r.jsx)("div",{className:"work-header",children:s&&(0,r.jsx)(i.P.button,{className:"write-button",onClick:()=>g(!0),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uc0c8 \uae00 \uc791\uc131"})}),h&&(0,r.jsxs)("div",{className:"loading-container",children:[(0,r.jsx)(i.P.div,{className:"loading-spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"\u27f3"}),(0,r.jsx)("p",{children:"\uae30\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}),p&&(0,r.jsxs)("div",{className:"error-container",children:[(0,r.jsxs)("p",{className:"error-message",children:["\uc624\ub958: ",p]}),(0,r.jsx)(i.P.button,{className:"retry-button",onClick:C,whileHover:{scale:1.05},whileTap:{scale:.95},children:"\ub2e4\uc2dc \uc2dc\ub3c4"})]}),!h&&!p&&0===c.length&&(0,r.jsxs)(i.P.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[(0,r.jsx)("p",{children:"\uc544\uc9c1 \uae30\ub85d\ub41c \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,r.jsx)("p",{children:"\uc0c8 \uae30\ub85d\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})]}),!h&&!p&&c.length>0&&(0,r.jsx)("div",{className:"posts-grid",children:c.map((e,t)=>(0,r.jsxs)("div",{className:"post-grid-item",children:[(0,r.jsx)("div",{className:"post-grid-thumbnail",onClick:()=>(e=>{j(e)})(e),children:e.thumbnail?(0,r.jsx)("img",{src:e.thumbnail,alt:e.title}):(0,r.jsx)("div",{className:"post-grid-no-image",children:"\uc774\ubbf8\uc9c0 \uc5c6\uc74c"})}),(0,r.jsx)("div",{className:"post-grid-content",children:(0,r.jsx)("h3",{className:"post-grid-title",children:e.title})})]},t))})]})]});var A}}}]);
//# sourceMappingURL=514.c2efc997.chunk.js.map